* testing my api routes

** index route

#+BEGIN_SRC restclient
GET http://localhost:3000/api
#+END_SRC

#+RESULTS:
#+BEGIN_SRC js
<h1>This is the index page!</h1>
// GET http://localhost:3000/api
// HTTP/1.1 200 OK
// content-length: 32
// Server: http-kit
// Date: Mon, 02 Jan 2023 10:47:44 GMT
// Request duration: 0.145028s
#+END_SRC

** not found route
#+BEGIN_SRC restclient
GET http://localhost:3000/api/not-found
#+END_SRC

#+RESULTS:
#+BEGIN_SRC js
[:error "Route not found"]
// GET http://localhost:3000/api/not-found
// HTTP/1.1 404 Not Found
// content-length: 26
// Server: http-kit
// Date: Mon, 02 Jan 2023 10:47:48 GMT
// Request duration: 0.008785s
#+END_SRC

** users routes
*** register users
#+BEGIN_SRC  restclient
POST http://localhost:3000/api/users/register
Content-Type: application/json
{
      "username": "Ronnie",
      "email": "ronnie@harikar.org",
      "password": "5GR693NK"
}
#+END_SRC

#+RESULTS:
#+BEGIN_SRC js
{
  "success": "user Ronnie was created succesfully"
}
// POST http://localhost:3000/api/users/register
// HTTP/1.1 200 OK
// Content-Type: application/json; charset=utf-8
// content-length: 49
// Server: http-kit
// Date: Sat, 31 Dec 2022 09:22:57 GMT
// Request duration: 0.569805s
#+END_SRC


*** login users
#+BEGIN_SRC  restclient
POST http://localhost:3000/api/users/login
Content-Type: application/json
{
      "email": "ronnie@harikar.org",
      "password": "5GR693NK"
}
#+END_SRC

#+RESULTS:
#+BEGIN_SRC js
{
  "user": {
    "id": "98cf888f-9498-40fd-b8b8-0c8be9b6c0fa",
    "username": "Ronnie",
    "email": "ronnie@harikar.org",
    "phone_number": null,
    "roles": [
      "admin"
    ]
  },
  "token": "eyJhbGciOiJIUzI1NiJ9.eyJpZCI6Ijk4Y2Y4ODhmLTk0OTgtNDBmZC1iOGI4LTBjOGJlOWI2YzBmYSIsInVzZXJuYW1lIjoiUm9ubmllIiwiZW1haWwiOiJyb25uaWVAaGFyaWthci5vcmciLCJwaG9uZV9udW1iZXIiOm51bGwsInJvbGVzIjpbImFkbWluIl19.oh7VS5A0cF_pK0_uBTN20QSSK6VVoxKcv9dYbEvUohw"
}
// POST http://localhost:3000/api/users/login
// HTTP/1.1 200 OK
// Content-Type: application/json; charset=utf-8
// content-length: 393
// Server: http-kit
// Date: Mon, 02 Jan 2023 10:47:59 GMT
// Request duration: 0.676003s
#+END_SRC


*** get users
#+BEGIN_SRC restclient
GET http://localhost:3000/api/users
Authorization: "Bearer eyJhbGciOiJIUzI1NiJ9.eyJpZCI6IjUxZjZhYmQwLTc5NDMtNGMwOS04NTNkLTE5NjZjMDRkMGY0ZSIsInVzZXJuYW1lIjoiUm9uIiwiZW1haWwiOiJyb25AaGFyaWthci5vcmciLCJwaG9uZV9udW1iZXIiOm51bGwsInJvbGVzIjpbXX0.EeLAXrcq6qczMIxrWXseTH2V01Hb7acRUGU_eJSjtaM"
#+END_SRC

#+RESULTS:
#+BEGIN_SRC js
{
  "error": "Unauthorized"
}
// GET http://localhost:3000/api/users
// HTTP/1.1 401 Unauthorized
// Content-Type: application/json; charset=utf-8
// content-length: 24
// Server: http-kit
// Date: Mon, 02 Jan 2023 11:10:17 GMT
// Request duration: 0.005802s
#+END_SRC


*** get user
#+BEGIN_SRC restclient
GET http://localhost:3000/api/users/a0e7c3bb-e17e-401e-96ce-b5dc14bcd9c8
#+END_SRC

#+RESULTS:
#+BEGIN_SRC js
[:error "Route not found"]
// GET http://localhost:3000/api/users/a0e7c3bb-e17e-401e-96ce-b5dc14bcd9c8
// HTTP/1.1 404 Not Found
// content-length: 26
// Server: http-kit
// Date: Mon, 02 Jan 2023 11:02:06 GMT
// Request duration: 0.003363s
#+END_SRC
